{% extends 'layout.html' %}


{% block head %}
{% parent %}
{% endblock %}

{% block body %}
<div class="page-content-wrapper">
    <div class="page-content">
        <!-- BEGIN PAGE HEADER-->
        <h3 class="page-title">
            {{ title }}
        </h3>
        <div class="page-bar">
            <ul class="page-breadcrumb">
                <li>
                    <i class="fa fa-home"></i>
                    <a href="/">主页</a>
                    <i class="fa fa-angle-right"></i>
                </li>
                <li>
                    <a href="#">主页</a>
                    <i class="fa fa-angle-right"></i>
                </li>
                <li>
                    <a href="#">{{ title }}</a>
                </li>
            </ul>
        </div>
        <!-- END PAGE HEADER-->
        <!-- BEGIN PAGE CONTENT-->
        <div class="row">
            <div class="col-md-12">
                <p>This is just an awesome page.</p>
                <p id="energy"></p>
                <a href="#" id="send" class="btn btn-primary">发送</a>
                <a href="#" id="close" class="btn btn-primary">停止</a>
            </div>
        </div>
        <!-- END PAGE CONTENT-->
    </div>
</div>
{% endblock %}

{% block script %}
<script type="text/javascript">
    $(function() {
        //telamon.leftNavActive($('#planning-index'));


        var socket = io('http://localhost:4002');

        socket.on('energy', function(data) {

            var span = $('<span>').text('用水: ' + data.energy.water);

            $('p#energy').append(span);
        });


        $('a#close').click(function(e) {
            e.preventDefault();
            console.log('disconnect');
            socket.disconnect();
        });

    });
</script>
{% endblock %}